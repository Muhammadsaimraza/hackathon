"use strict";(globalThis.webpackChunkrobolearn=globalThis.webpackChunkrobolearn||[]).push([[2761],{8453:(e,r,n)=>{n.d(r,{R:()=>i,x:()=>l});var t=n(6540);const s={},a=t.createContext(s);function i(e){const r=t.useContext(a);return t.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),t.createElement(a.Provider,{value:r},e.children)}},9379:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"module-1-ros/building-systems/6-1-parameters","title":"Lesson 6.1: Parameters","description":"Hard-coding values inside your code is generally a bad practice. What if you want to change the timer rate of your talker node? Or change the chatter topic to whisper? You could edit the code and rebuild, but there\'s a much better way: Parameters.","source":"@site/docs/module-1-ros/6-building-systems/6-1-parameters.md","sourceDirName":"module-1-ros/6-building-systems","slug":"/module-1-ros/building-systems/6-1-parameters","permalink":"/robolearn/docs/module-1-ros/building-systems/6-1-parameters","draft":false,"unlisted":false,"editUrl":"https://github.com/Muhammadsaimraza/robolearn/tree/main/docs/module-1-ros/6-building-systems/6-1-parameters.md","tags":[],"version":"current","frontMatter":{},"sidebar":"textbookSidebar","previous":{"title":"Chapter 6: Building Robot Systems","permalink":"/robolearn/docs/module-1-ros/building-systems/"},"next":{"title":"Lesson 6.2: Launch Files","permalink":"/robolearn/docs/module-1-ros/building-systems/6-2-launch-files"}}');var s=n(4848),a=n(8453);const i={},l="Lesson 6.1: Parameters",o={},d=[{value:"Declaring Parameters",id:"declaring-parameters",level:2},{value:"Code Breakdown",id:"code-breakdown",level:3},{value:"Register, Build, and Run",id:"register-build-and-run",level:2},{value:"Changing Parameters at Runtime",id:"changing-parameters-at-runtime",level:2}];function c(e){const r={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.header,{children:(0,s.jsx)(r.h1,{id:"lesson-61-parameters",children:"Lesson 6.1: Parameters"})}),"\n",(0,s.jsxs)(r.p,{children:["Hard-coding values inside your code is generally a bad practice. What if you want to change the timer rate of your talker node? Or change the ",(0,s.jsx)(r.code,{children:"chatter"})," topic to ",(0,s.jsx)(r.code,{children:"whisper"}),"? You could edit the code and rebuild, but there's a much better way: ",(0,s.jsx)(r.strong,{children:"Parameters"}),"."]}),"\n",(0,s.jsx)(r.p,{children:"Parameters are a way to provide configuration values to a node when it starts up. Every node has a built-in parameter server that other nodes can access."}),"\n",(0,s.jsx)(r.h2,{id:"declaring-parameters",children:"Declaring Parameters"}),"\n",(0,s.jsx)(r.p,{children:"Let's modify our talker node to use a parameter for the message content."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-python",children:"# my_first_package/talker_with_params.py\n\nimport rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\nclass TalkerWithParamsNode(Node):\n    def __init__(self):\n        super().__init__('talker_with_params_node')\n        \n        # Declare the parameter\n        self.declare_parameter('greeting', 'Hello')\n        \n        self.publisher_ = self.create_publisher(String, 'chatter', 10)\n        timer_period = 1.0\n        self.timer = self.create_timer(timer_period, self.timer_callback)\n        self.i = 0\n        self.get_logger().info('Talker with params node has been started.')\n\n    def timer_callback(self):\n        # Get the parameter value\n        greeting = self.get_parameter('greeting').get_parameter_value().string_value\n        \n        msg = String()\n        msg.data = f'{greeting} World: {self.i}'\n        self.publisher_.publish(msg)\n        self.get_logger().info(f'Publishing: \"{msg.data}\"')\n        self.i += 1\n\n# ... main function remains the same ...\ndef main(args=None):\n    rclpy.init(args=args)\n    node = TalkerWithParamsNode()\n    try:\n        rclpy.spin(node)\n    except KeyboardInterrupt:\n        pass\n    node.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,s.jsx)(r.h3,{id:"code-breakdown",children:"Code Breakdown"}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:(0,s.jsx)(r.code,{children:"self.declare_parameter('greeting', 'Hello')"})}),":","\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["This function does two things: it tells the node that a parameter named ",(0,s.jsx)(r.code,{children:"greeting"})," exists, and it provides a ",(0,s.jsx)(r.strong,{children:"default value"})," (",(0,s.jsx)(r.code,{children:"'Hello'"}),")."]}),"\n",(0,s.jsx)(r.li,{children:"If no value is provided for this parameter when the node starts, it will use the default."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:(0,s.jsx)(r.code,{children:"self.get_parameter('greeting').get_parameter_value().string_value"})}),":","\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"This is how you retrieve the parameter's current value inside your node."}),"\n",(0,s.jsxs)(r.li,{children:["It's a bit verbose, but it's explicit: you get the parameter object, then get its value object, then get the actual value cast to the correct type (",(0,s.jsx)(r.code,{children:"string_value"}),", ",(0,s.jsx)(r.code,{children:"integer_value"}),", etc.)."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"register-build-and-run",children:"Register, Build, and Run"}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Register Node:"})," Add ",(0,s.jsx)(r.code,{children:"talker_with_params = my_first_package.talker_with_params:main"})," to your ",(0,s.jsx)(r.code,{children:"setup.py"}),"."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Build:"})," ",(0,s.jsx)(r.code,{children:"colcon build"}),"."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Source:"})," ",(0,s.jsx)(r.code,{children:"source install/setup.bash"}),"."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Run:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Without setting the parameter:"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"ros2 run my_first_package talker_with_params\n"})}),"\n",(0,s.jsx)(r.p,{children:'The node will publish "Hello World: ...".'}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Setting the parameter from the command line:"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:'ros2 run my_first_package talker_with_params --ros-args -p greeting:="Hola"\n'})}),"\n",(0,s.jsx)(r.p,{children:'Now the node will publish "Hola World: ...".'}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(r.p,{children:["The ",(0,s.jsx)(r.code,{children:"--ros-args -p <param_name>:=<param_value>"})," syntax is the standard way to set a parameter for a node at startup."]}),"\n",(0,s.jsx)(r.h2,{id:"changing-parameters-at-runtime",children:"Changing Parameters at Runtime"}),"\n",(0,s.jsx)(r.p,{children:"You can also change a parameter while the node is running, just like you did with Turtlesim in Chapter 3."}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsx)(r.li,{children:"Start the node without setting the parameter."}),"\n",(0,s.jsxs)(r.li,{children:["In a second terminal, list the parameters for the node:","\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"ros2 param list\n"})}),"\n","You will see ",(0,s.jsx)(r.code,{children:"/talker_with_params_node"})," and its ",(0,s.jsx)(r.code,{children:"greeting"})," parameter."]}),"\n",(0,s.jsxs)(r.li,{children:["Now, change the parameter:","\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:'ros2 param set /talker_with_params_node greeting "Bonjour"\n'})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:'You will immediately see the output of your running node change from "Hello World" to "Bonjour World".'}),"\n",(0,s.jsx)(r.p,{children:"Parameters are the key to creating reusable and flexible nodes. By externalizing configuration, you can adapt your node to different robots and different situations without ever touching the source code. In the next lesson, we'll see how to make this even easier by setting parameters from a launch file."})]})}function h(e={}){const{wrapper:r}={...(0,a.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}}}]);