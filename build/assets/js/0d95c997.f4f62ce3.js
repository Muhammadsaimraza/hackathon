"use strict";(globalThis.webpackChunkrobolearn=globalThis.webpackChunkrobolearn||[]).push([[8861],{6124:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>i,default:()=>h,frontMatter:()=>l,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"module-1-ros/building-systems/6-2-launch-files","title":"Lesson 6.2: Launch Files","description":"So far, every time you\'ve wanted to run your talker/listener system, you\'ve had to open two terminals, source the environment in both, and run a ros2 run command in each. This is tedious and doesn\'t scale.","source":"@site/docs/module-1-ros/6-building-systems/6-2-launch-files.md","sourceDirName":"module-1-ros/6-building-systems","slug":"/module-1-ros/building-systems/6-2-launch-files","permalink":"/robolearn/docs/module-1-ros/building-systems/6-2-launch-files","draft":false,"unlisted":false,"editUrl":"https://github.com/Muhammadsaimraza/robolearn/tree/main/docs/module-1-ros/6-building-systems/6-2-launch-files.md","tags":[],"version":"current","frontMatter":{},"sidebar":"textbookSidebar","previous":{"title":"Lesson 6.1: Parameters","permalink":"/robolearn/docs/module-1-ros/building-systems/6-1-parameters"},"next":{"title":"Lesson 6.3: Debugging Systems","permalink":"/robolearn/docs/module-1-ros/building-systems/6-3-debugging-systems"}}');var r=s(4848),t=s(8453);const l={},i="Lesson 6.2: Launch Files",o={},c=[{value:"Creating a Launch File",id:"creating-a-launch-file",level:2},{value:"Code Breakdown",id:"code-breakdown",level:3},{value:"Installing the Launch File",id:"installing-the-launch-file",level:2},{value:"Build and Launch",id:"build-and-launch",level:2},{value:"Setting Parameters in a Launch File",id:"setting-parameters-in-a-launch-file",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"lesson-62-launch-files",children:"Lesson 6.2: Launch Files"})}),"\n",(0,r.jsxs)(n.p,{children:["So far, every time you've wanted to run your talker/listener system, you've had to open two terminals, source the environment in both, and run a ",(0,r.jsx)(n.code,{children:"ros2 run"})," command in each. This is tedious and doesn't scale."]}),"\n",(0,r.jsxs)(n.p,{children:["A ",(0,r.jsx)(n.strong,{children:"Launch File"})," is a script that automates this process. It allows you to define a whole system of nodes, configure them, and start them all with a single command. In ROS 2, launch files are written in Python."]}),"\n",(0,r.jsx)(n.h2,{id:"creating-a-launch-file",children:"Creating a Launch File"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.strong,{children:["Create a ",(0,r.jsx)(n.code,{children:"launch"})," directory:"]})," Inside your ",(0,r.jsx)(n.code,{children:"my_first_package"})," directory, create a new directory called ",(0,r.jsx)(n.code,{children:"launch"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Create the launch file:"})," Inside the ",(0,r.jsx)(n.code,{children:"launch"})," directory, create a new Python file, for example ",(0,r.jsx)(n.code,{children:"talker_listener.launch.py"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"# my_first_package/launch/talker_listener.launch.py\n\nfrom launch import LaunchDescription\nfrom launch_ros.actions import Node\n\ndef generate_launch_description():\n    \"\"\"\n    Generates the launch description for the talker and listener system.\n    \"\"\"\n    return LaunchDescription([\n        Node(\n            package='my_first_package',\n            executable='talker',\n            name='my_talker'\n        ),\n        Node(\n            package='my_first_package',\n            executable='listener',\n            name='my_listener'\n        )\n    ])\n"})}),"\n",(0,r.jsx)(n.h3,{id:"code-breakdown",children:"Code Breakdown"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Imports:"})," We import ",(0,r.jsx)(n.code,{children:"LaunchDescription"})," and the ROS-specific ",(0,r.jsx)(n.code,{children:"Node"})," action."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.strong,{children:[(0,r.jsx)(n.code,{children:"generate_launch_description()"}),":"]})," This is the main function that ROS 2 will look for when you ask it to run the launch file. It must return a ",(0,r.jsx)(n.code,{children:"LaunchDescription"})," object."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"LaunchDescription([...])"})}),": This object holds a list of all the ",(0,r.jsx)(n.strong,{children:"actions"})," you want to perform. The most common action is ",(0,r.jsx)(n.code,{children:"Node"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"Node(...)"})}),": This action tells the launch system to start a node. You must specify the ",(0,r.jsx)(n.code,{children:"package"})," and the ",(0,r.jsx)(n.code,{children:"executable"})," (the name you defined in ",(0,r.jsx)(n.code,{children:"setup.py"}),"). You can also optionally provide a unique ",(0,r.jsx)(n.code,{children:"name"})," for the node."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"installing-the-launch-file",children:"Installing the Launch File"}),"\n",(0,r.jsxs)(n.p,{children:["You need to tell ",(0,r.jsx)(n.code,{children:"colcon"})," to install your ",(0,r.jsx)(n.code,{children:"launch"})," directory so that ",(0,r.jsx)(n.code,{children:"ros2 launch"})," can find it. Open your ",(0,r.jsx)(n.code,{children:"setup.py"})," and add the following ",(0,r.jsx)(n.code,{children:"data_files"})," entry:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"# setup.py\nimport os\nfrom glob import glob\n...\nsetup(\n    ...\n    data_files=[\n        ('share/ament_index/resource_index/packages',\n            ['resource/' + package_name]),\n        ('share/' + package_name, ['package.xml']),\n        # Add this line to install all files from the launch directory\n        (os.path.join('share', package_name, 'launch'), glob('launch/*.launch.py')),\n    ],\n    ...\n)\n"})}),"\n",(0,r.jsx)(n.h2,{id:"build-and-launch",children:"Build and Launch"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Build:"})," Run ",(0,r.jsx)(n.code,{children:"colcon build"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Source:"})," ",(0,r.jsx)(n.code,{children:"source install/setup.bash"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Launch:"})," Now, instead of two ",(0,r.jsx)(n.code,{children:"ros2 run"})," commands, you can use one ",(0,r.jsx)(n.code,{children:"ros2 launch"})," command:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 launch my_first_package talker_listener.launch.py\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"You will see the output from both the talker and the listener interleaved in the same terminal. Both nodes have been started by a single command."}),"\n",(0,r.jsx)(n.h2,{id:"setting-parameters-in-a-launch-file",children:"Setting Parameters in a Launch File"}),"\n",(0,r.jsxs)(n.p,{children:["Launch files are also the perfect place to set parameters. Let's create a new launch file for our ",(0,r.jsx)(n.code,{children:"talker_with_params"})," node."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"# my_first_package/launch/params_talker.launch.py\n\nfrom launch import LaunchDescription\nfrom launch_ros.actions import Node\n\ndef generate_launch_description():\n    return LaunchDescription([\n        Node(\n            package='my_first_package',\n            executable='talker_with_params',\n            name='my_params_talker',\n            parameters=[\n                {'greeting': 'Bonjour'}\n            ]\n        )\n    ])\n"})}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"parameters"})," argument takes a list of dictionaries."]}),"\n",(0,r.jsx)(n.p,{children:'Now, when you build and run this launch file, the node will start up and immediately begin publishing "Bonjour World: ..." without needing any command-line arguments.'}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 launch my_first_package params_talker.launch.py\n"})}),"\n",(0,r.jsx)(n.p,{children:"Launch files are the standard way to run any non-trivial ROS 2 system. They are essential for managing the complexity of a real robot. In the final lesson of this chapter, we'll look at the tools that help you debug these complex systems."})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>i});var a=s(6540);const r={},t=a.createContext(r);function l(e){const n=a.useContext(t);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),a.createElement(t.Provider,{value:n},e.children)}}}]);