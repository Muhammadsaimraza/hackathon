"use strict";(globalThis.webpackChunkrobolearn=globalThis.webpackChunkrobolearn||[]).push([[6370],{8453:(e,s,n)=>{n.d(s,{R:()=>o,x:()=>l});var i=n(6540);const t={},r=i.createContext(t);function o(e){const s=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),i.createElement(r.Provider,{value:s},e.children)}},9962:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"module-1-ros/capstone/7-1-capstone-specification","title":"Lesson 7.1: The Specification","description":"Before writing a single line of code for a complex system, a good engineer writes a specification. A specification is a detailed description of what the system should do, not how it should do it. It defines the components, their interfaces, and their expected behavior.","source":"@site/docs/module-1-ros/7-capstone/7-1-capstone-specification.md","sourceDirName":"module-1-ros/7-capstone","slug":"/module-1-ros/capstone/7-1-capstone-specification","permalink":"/robolearn/docs/module-1-ros/capstone/7-1-capstone-specification","draft":false,"unlisted":false,"editUrl":"https://github.com/Muhammadsaimraza/robolearn/tree/main/docs/module-1-ros/7-capstone/7-1-capstone-specification.md","tags":[],"version":"current","frontMatter":{},"sidebar":"textbookSidebar","previous":{"title":"Chapter 7: Capstone - Robot Controller","permalink":"/robolearn/docs/module-1-ros/capstone/"},"next":{"title":"Lesson 7.2: Building the Controller","permalink":"/robolearn/docs/module-1-ros/capstone/7-2-building-the-controller"}}');var t=n(4848),r=n(8453);const o={},l="Lesson 7.1: The Specification",c={},d=[{value:"High-Level Requirements",id:"high-level-requirements",level:2},{value:"System Components",id:"system-components",level:2},{value:"Interface Design (The &quot;API&quot;)",id:"interface-design-the-api",level:2},{value:"Custom Service: <code>DrawShape.srv</code>",id:"custom-service-drawshapesrv",level:3},{value:"Node-by-Node Specification",id:"node-by-node-specification",level:2},{value:"1. <code>shape_drawer_node</code>",id:"1-shape_drawer_node",level:3},{value:"2. <code>turtlesim_node</code>",id:"2-turtlesim_node",level:3},{value:"Launch File Specification",id:"launch-file-specification",level:2}];function a(e){const s={code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"lesson-71-the-specification",children:"Lesson 7.1: The Specification"})}),"\n",(0,t.jsxs)(s.p,{children:["Before writing a single line of code for a complex system, a good engineer writes a specification. A specification is a detailed description of ",(0,t.jsx)(s.em,{children:"what"})," the system should do, not ",(0,t.jsx)(s.em,{children:"how"})," it should do it. It defines the components, their interfaces, and their expected behavior."]}),"\n",(0,t.jsx)(s.p,{children:"For this capstone, we will design a system that commands a turtle in the Turtlesim simulator to draw a shape."}),"\n",(0,t.jsx)(s.h2,{id:"high-level-requirements",children:"High-Level Requirements"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsx)(s.li,{children:"The system shall be able to command a turtle to draw a polygon (e.g., a square)."}),"\n",(0,t.jsx)(s.li,{children:"The shape's size (edge length) and drawing speed shall be configurable."}),"\n",(0,t.jsx)(s.li,{children:"The drawing process shall be triggered by a service call."}),"\n",(0,t.jsx)(s.li,{children:"The system shall be started with a single launch file."}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"system-components",children:"System Components"}),"\n",(0,t.jsx)(s.p,{children:"Based on these requirements, we can identify the need for at least two nodes:"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"A Controller Node:"}),' This node will be responsible for the "business logic" of drawing the shape. It will translate the high-level goal ("draw a square") into a sequence of low-level velocity commands.']}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"A Turtlesim Node:"})," The simulator itself, which we will launch as part of our system."]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"interface-design-the-api",children:'Interface Design (The "API")'}),"\n",(0,t.jsx)(s.p,{children:"How will our nodes communicate?"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Controller \u2192 Turtlesim:"})," The controller needs to send velocity commands to the simulator. We will use the standard ",(0,t.jsx)(s.code,{children:"/turtle1/cmd_vel"})," topic with ",(0,t.jsx)(s.code,{children:"geometry_msgs/msg/Twist"})," messages, just as ",(0,t.jsx)(s.code,{children:"turtle_teleop_key"})," did."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"User \u2192 Controller:"})," The user needs a way to trigger the drawing process. A service is a perfect fit for this. We will create a service that the user can call to start the drawing."]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"Let's define our service. We'll need a custom service type."}),"\n",(0,t.jsxs)(s.h3,{id:"custom-service-drawshapesrv",children:["Custom Service: ",(0,t.jsx)(s.code,{children:"DrawShape.srv"})]}),"\n",(0,t.jsxs)(s.p,{children:["Let's create this in our ",(0,t.jsx)(s.code,{children:"my_custom_interfaces"})," package."]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"# srv/DrawShape.srv\nfloat32 edge_length\nint32 sides\n---\nbool success\n"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Request:"})," ",(0,t.jsx)(s.code,{children:"edge_length"})," defines the size of the shape, and ",(0,t.jsx)(s.code,{children:"sides"})," defines how many sides the polygon has (e.g., 4 for a square)."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Response:"})," A simple boolean to indicate if the drawing was completed successfully."]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"node-by-node-specification",children:"Node-by-Node Specification"}),"\n",(0,t.jsxs)(s.h3,{id:"1-shape_drawer_node",children:["1. ",(0,t.jsx)(s.code,{children:"shape_drawer_node"})]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Node Name:"})," ",(0,t.jsx)(s.code,{children:"shape_drawer_node"})]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Purpose:"})," Provides a service to draw a shape and publishes the necessary velocity commands."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Parameters:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"linear_velocity"})," (float, default: 1.0): The forward speed of the turtle while drawing."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"angular_velocity"})," (float, default: 1.0): The turning speed of the turtle at the corners."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Services Provided:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"/draw_shape"})," (",(0,t.jsx)(s.code,{children:"my_custom_interfaces/srv/DrawShape"}),"): Receives a request to draw a shape."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Topics Published:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"/turtle1/cmd_vel"})," (",(0,t.jsx)(s.code,{children:"geometry_msgs/msg/Twist"}),"): Publishes velocity commands to move the turtle."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Behavior:"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["When the ",(0,t.jsx)(s.code,{children:"/draw_shape"})," service is called, the node receives the ",(0,t.jsx)(s.code,{children:"edge_length"})," and ",(0,t.jsx)(s.code,{children:"sides"}),"."]}),"\n",(0,t.jsx)(s.li,{children:"It calculates the required turning angle for the corners (360 / sides)."}),"\n",(0,t.jsx)(s.li,{children:"It enters a loop that repeats for the number of sides."}),"\n",(0,t.jsxs)(s.li,{children:["In each loop iteration, it:\na.  Publishes a ",(0,t.jsx)(s.code,{children:"Twist"})," message with ",(0,t.jsx)(s.code,{children:"linear.x"})," set to the ",(0,t.jsx)(s.code,{children:"linear_velocity"})," parameter for a duration of (",(0,t.jsx)(s.code,{children:"edge_length"})," / ",(0,t.jsx)(s.code,{children:"linear_velocity"}),") seconds.\nb.  Publishes a ",(0,t.jsx)(s.code,{children:"Twist"})," message with ",(0,t.jsx)(s.code,{children:"angular.z"})," set to the ",(0,t.jsx)(s.code,{children:"angular_velocity"})," parameter for a duration of (",(0,t.jsx)(s.code,{children:"turn_angle"})," / ",(0,t.jsx)(s.code,{children:"angular_velocity"}),") seconds."]}),"\n",(0,t.jsxs)(s.li,{children:["After the loop completes, it publishes a zero-velocity ",(0,t.jsx)(s.code,{children:"Twist"})," message to stop the turtle."]}),"\n",(0,t.jsxs)(s.li,{children:["It returns ",(0,t.jsx)(s.code,{children:"success: true"})," in the service response."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.h3,{id:"2-turtlesim_node",children:["2. ",(0,t.jsx)(s.code,{children:"turtlesim_node"})]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["This is the standard node from the ",(0,t.jsx)(s.code,{children:"turtlesim"})," package. We don't need to write it, just launch it."]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"launch-file-specification",children:"Launch File Specification"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Name:"})," ",(0,t.jsx)(s.code,{children:"capstone.launch.py"})]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Actions:"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["Start the ",(0,t.jsx)(s.code,{children:"turtlesim_node"})," from the ",(0,t.jsx)(s.code,{children:"turtlesim"})," package."]}),"\n",(0,t.jsxs)(s.li,{children:["Start our ",(0,t.jsx)(s.code,{children:"shape_drawer_node"}),"."]}),"\n",(0,t.jsxs)(s.li,{children:["Pass default parameter values to the ",(0,t.jsx)(s.code,{children:"shape_drawer_node"})," (e.g., ",(0,t.jsx)(s.code,{children:"linear_velocity: 0.5"}),", ",(0,t.jsx)(s.code,{children:"angular_velocity: 0.5"}),")."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.p,{children:"With this specification, we have a complete and unambiguous plan. We know exactly what to build, how the components will interact, and what the final behavior should be. In the next lesson, you will implement this plan."})]})}function h(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}}}]);