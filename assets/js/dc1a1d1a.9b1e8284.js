"use strict";(globalThis.webpackChunkrobolearn=globalThis.webpackChunkrobolearn||[]).push([[1263],{6407:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"module-1-ros/communication/5-4-design-patterns","title":"Lesson 5.4: Design Patterns (Topics vs. Services)","description":"You are now armed with two powerful communication tools: topics (publish/subscribe) and services (request/response). The mark of an experienced ROS developer is knowing which tool to use for which job. This is a question of system design.","source":"@site/docs/module-1-ros/5-communication/5-4-design-patterns.md","sourceDirName":"module-1-ros/5-communication","slug":"/module-1-ros/communication/5-4-design-patterns","permalink":"/hackathon/docs/module-1-ros/communication/5-4-design-patterns","draft":false,"unlisted":false,"editUrl":"https://github.com/Muhammadsaimraza/docs/module-1-ros/5-communication/5-4-design-patterns.md","tags":[],"version":"current","frontMatter":{},"sidebar":"textbookSidebar","previous":{"title":"Lesson 5.3: Custom Interfaces","permalink":"/hackathon/docs/module-1-ros/communication/5-3-custom-interface"},"next":{"title":"Chapter 6: Building Robot Systems","permalink":"/hackathon/docs/module-1-ros/building-systems/"}}');var o=s(4848),t=s(8453);const r={},c="Lesson 5.4: Design Patterns (Topics vs. Services)",a={},l=[{value:"Topics: For Continuous Data Streams",id:"topics-for-continuous-data-streams",level:2},{value:"Services: For Discrete Actions &amp; Queries",id:"services-for-discrete-actions--queries",level:2},{value:"A Hybrid Example: Taking a Picture",id:"a-hybrid-example-taking-a-picture",level:2},{value:"Conclusion",id:"conclusion",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"lesson-54-design-patterns-topics-vs-services",children:"Lesson 5.4: Design Patterns (Topics vs. Services)"})}),"\n",(0,o.jsx)(n.p,{children:"You are now armed with two powerful communication tools: topics (publish/subscribe) and services (request/response). The mark of an experienced ROS developer is knowing which tool to use for which job. This is a question of system design."}),"\n",(0,o.jsx)(n.p,{children:"There is no single right answer, but there are well-established patterns and trade-offs."}),"\n",(0,o.jsx)(n.h2,{id:"topics-for-continuous-data-streams",children:"Topics: For Continuous Data Streams"}),"\n",(0,o.jsxs)(n.p,{children:["Use a ",(0,o.jsx)(n.strong,{children:"topic"})," when the data is being produced continuously, and you don't care if anyone is listening. Think of it as a broadcast."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Key Characteristics:"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"One-to-Many:"})," One publisher, many subscribers."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Asynchronous:"})," The publisher sends the message and moves on. It doesn't wait for anyone."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Stateless:"})," The publisher doesn't know who is subscribed, and subscribers don't know who published."]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Good For:"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Sensor Data:"})," Camera images, LiDAR scans, IMU readings. These are continuous streams of data about the state of the world."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Robot State:"})," Publishing the robot's current position (",(0,o.jsx)(n.code,{children:"/tf"}),"), joint angles (",(0,o.jsx)(n.code,{children:"/joint_states"}),"), or battery level."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Commands:"})," Sending continuous velocity commands (",(0,o.jsx)(n.code,{children:"/cmd_vel"}),") to a robot base."]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Anti-Patterns (When NOT to use a topic):"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Don't use a topic if you need a direct confirmation that the message was received and processed."}),"\n",(0,o.jsx)(n.li,{children:'Don\'t use a topic for a single, discrete action where you need a result (e.g., "compute the inverse kinematics for this position").'}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"services-for-discrete-actions--queries",children:"Services: For Discrete Actions & Queries"}),"\n",(0,o.jsxs)(n.p,{children:["Use a ",(0,o.jsx)(n.strong,{children:"service"})," when you need to trigger a specific action and get a direct response. Think of it as a function call."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Key Characteristics:"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"One-to-One:"})," One client, one server."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Synchronous:"})," The client sends a request and blocks (waits) until it receives a response."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Stateful Transaction:"})," The client and server are in a direct, two-way conversation."]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Good For:"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Triggering an Action:"})," ",(0,o.jsx)(n.code,{children:"/reset_simulation"}),", ",(0,o.jsx)(n.code,{children:"/capture_image"}),", ",(0,o.jsx)(n.code,{children:"/move_arm_to_home_position"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Querying for Data:"})," ",(0,o.jsx)(n.code,{children:"/get_map"}),", ",(0,o.jsx)(n.code,{children:"/lookup_transform"}),", ",(0,o.jsx)(n.code,{children:"/what_is_your_name"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Performing a Calculation:"})," ",(0,o.jsx)(n.code,{children:"/add_two_ints"}),", ",(0,o.jsx)(n.code,{children:"/compute_ik_solution"}),"."]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Anti-Patterns (When NOT to use a service):"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Don't use a service for a long-running task. If the action will take more than a few seconds, the client will be blocked for too long. For this, we use ",(0,o.jsx)(n.strong,{children:"Actions"})," (covered in a later chapter)."]}),"\n",(0,o.jsx)(n.li,{children:"Don't use a service for streaming data. Publishing camera images over a service would be incredibly inefficient."}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"a-hybrid-example-taking-a-picture",children:"A Hybrid Example: Taking a Picture"}),"\n",(0,o.jsx)(n.p,{children:"Let's consider a camera node. How should it provide its data? It should use both!"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Topic for Streaming:"})," The node should continuously ",(0,o.jsx)(n.strong,{children:"publish"})," ",(0,o.jsx)(n.code,{children:"sensor_msgs/msg/Image"})," messages to a topic like ",(0,o.jsx)(n.code,{children:"/camera/image_raw"}),". This allows any number of other nodes to use the live video feed for object detection, tracking, etc."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Service for Triggering:"})," The node could also provide a ",(0,o.jsx)(n.strong,{children:"service"})," called ",(0,o.jsx)(n.code,{children:"/camera/save_image"})," of type ",(0,o.jsx)(n.code,{children:"my_interfaces/srv/SaveImage"}),". The request could contain a ",(0,o.jsx)(n.code,{children:"filepath"}),", and the response could contain a ",(0,o.jsx)(n.code,{children:"bool success"}),". This allows a client to request that a single, specific frame be saved to disk and to get a confirmation that the action was completed."]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"By providing both interfaces, the camera node becomes much more flexible and reusable."}),"\n",(0,o.jsx)(n.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,o.jsx)(n.p,{children:"Choosing between topics and services is a fundamental design decision in ROS 2. By thinking about the nature of the data and the interaction required, you can build clean, robust, and maintainable robotic systems."}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Continuous stream? Unidirectional?"})," Use a topic."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Discrete action? Bidirectional? Need a response?"})," Use a service."]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"This concludes Chapter 5. You are now a master of ROS 2's core communication patterns. In the next chapter, we will learn how to assemble the nodes you've built into a complete system using launch files."})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>c});var i=s(6540);const o={},t=i.createContext(o);function r(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);