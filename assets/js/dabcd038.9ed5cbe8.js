"use strict";(globalThis.webpackChunkrobolearn=globalThis.webpackChunkrobolearn||[]).push([[6622],{1465:(e,n,l)=>{l.r(n),l.d(n,{assets:()=>a,contentTitle:()=>r,default:()=>h,frontMatter:()=>s,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"module-2-simulation/module-2-capstone/13-2-building-the-simulation","title":"Lesson 13.2: Building the Simulation","description":"This lesson involves assembling the pieces of the simulation based on our specification. You will create the world, ensure your URDF is complete, and write the final launch file.","source":"@site/docs/module-2-simulation/13-module-2-capstone/13-2-building-the-simulation.md","sourceDirName":"module-2-simulation/13-module-2-capstone","slug":"/module-2-simulation/module-2-capstone/13-2-building-the-simulation","permalink":"/hackathon/docs/module-2-simulation/module-2-capstone/13-2-building-the-simulation","draft":false,"unlisted":false,"editUrl":"https://github.com/Muhammadsaimraza/docs/module-2-simulation/13-module-2-capstone/13-2-building-the-simulation.md","tags":[],"version":"current","frontMatter":{},"sidebar":"textbookSidebar","previous":{"title":"Lesson 13.1: The Specification","permalink":"/hackathon/docs/module-2-simulation/module-2-capstone/13-1-capstone-specification"},"next":{"title":"Lesson 13.3: Testing & Validation","permalink":"/hackathon/docs/module-2-simulation/module-2-capstone/13-3-testing-and-validation"}}');var i=l(4848),t=l(8453);const s={},r="Lesson 13.2: Building the Simulation",a={},d=[{value:"1. Create the World",id:"1-create-the-world",level:2},{value:"2. Update the Robot URDF",id:"2-update-the-robot-urdf",level:2},{value:"3. Implement the Wall Follower Node",id:"3-implement-the-wall-follower-node",level:2},{value:"4. Create the Capstone Launch File",id:"4-create-the-capstone-launch-file",level:2},{value:"5. Build and Run",id:"5-build-and-run",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"lesson-132-building-the-simulation",children:"Lesson 13.2: Building the Simulation"})}),"\n",(0,i.jsx)(n.p,{children:"This lesson involves assembling the pieces of the simulation based on our specification. You will create the world, ensure your URDF is complete, and write the final launch file."}),"\n",(0,i.jsx)(n.h2,{id:"1-create-the-world",children:"1. Create the World"}),"\n",(0,i.jsxs)(n.p,{children:["Create a new world file, ",(0,i.jsx)(n.code,{children:"worlds/wall_follower_world.sdf"}),". This world needs a wall for the robot to follow. A simple box is sufficient."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0" ?>\n<sdf version="1.7">\n  <world name="wall_follower_world">\n    <include>\n      <uri>model://sun</uri>\n    </include>\n    <include>\n      <uri>model://ground_plane</uri>\n    </include>\n    \n    <model name="wall">\n      <pose>0 5 0.5 0 0 0</pose>\n      <link name="link">\n        <collision name="collision">\n          <geometry>\n            <box>\n              <size>10 0.2 1</size>\n            </box>\n          </geometry>\n        </collision>\n        <visual name="visual">\n          <geometry>\n            <box>\n              <size>10 0.2 1</size>\n            </box>\n          </geometry>\n        </visual>\n      </link>\n      <static>true</static>\n    </model>\n\n  </world>\n</sdf>\n'})}),"\n",(0,i.jsxs)(n.p,{children:["This creates a long, thin box to act as a wall at ",(0,i.jsx)(n.code,{children:"y=5"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"2-update-the-robot-urdf",children:"2. Update the Robot URDF"}),"\n",(0,i.jsxs)(n.p,{children:["Ensure your ",(0,i.jsx)(n.code,{children:"two_wheeled_robot.urdf"})," from the previous chapters is complete and matches the specification. It must include:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.code,{children:"chassis"}),", ",(0,i.jsx)(n.code,{children:"left_wheel"}),", and ",(0,i.jsx)(n.code,{children:"right_wheel"})," links with ",(0,i.jsx)(n.code,{children:"<visual>"}),", ",(0,i.jsx)(n.code,{children:"<collision>"}),", and ",(0,i.jsx)(n.code,{children:"<inertial>"})," tags."]}),"\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.code,{children:"DiffDrive"})," plugin configured to listen on ",(0,i.jsx)(n.code,{children:"/cmd_vel"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["A ",(0,i.jsx)(n.code,{children:"lidar_link"})," and ",(0,i.jsx)(n.code,{children:"lidar_joint"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.code,{children:"gpu_lidar"})," sensor plugin attached to the ",(0,i.jsx)(n.code,{children:"lidar_link"})," and configured to publish on ",(0,i.jsx)(n.code,{children:"/scan"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"3-implement-the-wall-follower-node",children:"3. Implement the Wall Follower Node"}),"\n",(0,i.jsxs)(n.p,{children:["This is the ",(0,i.jsx)(n.code,{children:"wall_follower.py"})," node you wrote in the previous chapter. Ensure it is complete and correctly implements the logic from the specification. Make sure it declares and uses the required parameters."]}),"\n",(0,i.jsx)(n.h2,{id:"4-create-the-capstone-launch-file",children:"4. Create the Capstone Launch File"}),"\n",(0,i.jsxs)(n.p,{children:["Create ",(0,i.jsx)(n.code,{children:"launch/module2_capstone.launch.py"}),". This file will integrate all the components."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"import os\nfrom ament_index_python.packages import get_package_share_directory\nfrom launch import LaunchDescription\nfrom launch.actions import ExecuteProcess\nfrom launch_ros.actions import Node\n\ndef generate_launch_description():\n    pkg_share = get_package_share_directory('urdf_tutorial')\n    world_file = os.path.join(pkg_share, 'worlds', 'wall_follower_world.sdf')\n    urdf_file = os.path.join(pkg_share, 'urdf', 'two_wheeled_robot.urdf')\n\n    # 1. Launch Gazebo\n    gz_sim = ExecuteProcess(\n        cmd=['gz', 'sim', '-r', world_file],\n        output='screen'\n    )\n\n    # 2. Spawn the robot\n    spawn_robot = Node(\n        package='ros_gz_sim',\n        executable='create',\n        arguments=[\n            '-file', urdf_file,\n            '-name', 'my_robot',\n            '-x', '0.0',\n            '-y', '0.0',\n            '-z', '0.1'\n        ],\n        output='screen',\n    )\n    \n    # 3. Start the Wall Follower Node\n    wall_follower = Node(\n        package='my_first_package', # Assuming the node is in this package\n        executable='wall_follower', # The name from your setup.py\n        name='wall_follower_node',\n        output='screen',\n        parameters=[\n            {'desired_distance': 1.5},\n            {'forward_velocity': 0.3},\n            {'proportional_gain': 0.8}\n        ]\n    )\n\n    return LaunchDescription([\n        gz_sim,\n        spawn_robot,\n        wall_follower,\n    ])\n"})}),"\n",(0,i.jsx)(n.h2,{id:"5-build-and-run",children:"5. Build and Run"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Make sure all your nodes (",(0,i.jsx)(n.code,{children:"wall_follower"}),") are correctly registered in their respective ",(0,i.jsx)(n.code,{children:"setup.py"})," files and all dependencies are in ",(0,i.jsx)(n.code,{children:"package.xml"}),"."]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"colcon build"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"source install/setup.bash"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"ros2 launch urdf_tutorial module2_capstone.launch.py"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"When you launch the system, you should see Gazebo open, the world with the wall appear, your robot spawn, and the robot should immediately start moving and trying to follow the wall."}),"\n",(0,i.jsx)(n.p,{children:"You have now built an integrated, closed-loop robotics simulation. In the final lesson, you will formally test it."})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,n,l)=>{l.d(n,{R:()=>s,x:()=>r});var o=l(6540);const i={},t=o.createContext(i);function s(e){const n=o.useContext(t);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),o.createElement(t.Provider,{value:n},e.children)}}}]);