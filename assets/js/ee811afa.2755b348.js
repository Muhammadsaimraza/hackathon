"use strict";(globalThis.webpackChunkrobolearn=globalThis.webpackChunkrobolearn||[]).push([[741],{7601:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"module-1-ros/meet-ros2/3-3-nodes-and-topic","title":"Lesson 3.3: Nodes & Topics","description":"In the last lesson, you got Turtlesim running. You have a turtlesimnode process and a turtleteleop_key process. But from the perspective of ROS, these are just generic processes. Let\'s use the ros2 CLI to see what\'s really going on.","source":"@site/docs/module-1-ros/3-meet-ros2/3-3-nodes-and-topic.md","sourceDirName":"module-1-ros/3-meet-ros2","slug":"/module-1-ros/meet-ros2/3-3-nodes-and-topic","permalink":"/hackathon/docs/module-1-ros/meet-ros2/3-3-nodes-and-topic","draft":false,"unlisted":false,"editUrl":"https://github.com/Muhammadsaimraza/docs/module-1-ros/3-meet-ros2/3-3-nodes-and-topic.md","tags":[],"version":"current","frontMatter":{},"sidebar":"textbookSidebar","previous":{"title":"Lesson 3.2: Your First Robot (Turtlesim)","permalink":"/hackathon/docs/module-1-ros/meet-ros2/3-2-turtlesim"},"next":{"title":"Lesson 3.4: Services & Parameters","permalink":"/hackathon/docs/module-1-ros/meet-ros2/3-4-services-and-parameters"}}');var o=n(4848),i=n(8453);const r={},l="Lesson 3.3: Nodes & Topics",c={},d=[{value:"Discovering Nodes",id:"discovering-nodes",level:2},{value:"Discovering Topics",id:"discovering-topics",level:2},{value:"Spying on a Topic",id:"spying-on-a-topic",level:2},{value:"Publishing from the Command Line",id:"publishing-from-the-command-line",level:2}];function a(e){const s={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.header,{children:(0,o.jsx)(s.h1,{id:"lesson-33-nodes--topics",children:"Lesson 3.3: Nodes & Topics"})}),"\n",(0,o.jsxs)(s.p,{children:["In the last lesson, you got Turtlesim running. You have a ",(0,o.jsx)(s.code,{children:"turtlesim_node"})," process and a ",(0,o.jsx)(s.code,{children:"turtle_teleop_key"})," process. But from the perspective of ROS, these are just generic processes. Let's use the ",(0,o.jsx)(s.code,{children:"ros2"})," CLI to see what's really going on."]}),"\n",(0,o.jsxs)(s.p,{children:["With your two Turtlesim nodes still running, open a ",(0,o.jsx)(s.strong,{children:"third terminal"})," and source your ROS 2 environment."]}),"\n",(0,o.jsx)(s.h2,{id:"discovering-nodes",children:"Discovering Nodes"}),"\n",(0,o.jsxs)(s.p,{children:["The ",(0,o.jsx)(s.code,{children:"ros2 node"})," command lets us introspect the running nodes in the ROS graph."]}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-bash",children:"ros2 node list\n"})}),"\n",(0,o.jsx)(s.p,{children:"You should see output similar to this:"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{children:"/turtlesim\n/teleop_turtle\n"})}),"\n",(0,o.jsxs)(s.p,{children:["These are the names of the two nodes that are currently running. Note that ",(0,o.jsx)(s.code,{children:"/teleop_turtle"})," is the default name for the ",(0,o.jsx)(s.code,{children:"turtle_teleop_key"})," executable."]}),"\n",(0,o.jsx)(s.h2,{id:"discovering-topics",children:"Discovering Topics"}),"\n",(0,o.jsx)(s.p,{children:"Nodes communicate using topics. Let's see what topics are currently active in the system."}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-bash",children:"ros2 topic list\n"})}),"\n",(0,o.jsx)(s.p,{children:"This will show you a list of all the topics that nodes are either publishing to or subscribing from. You'll see a few, but the most important ones are:"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{children:"/turtle1/cmd_vel\n/turtle1/pose\n/parameter_events\n/rosout\n"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.code,{children:"/turtle1/cmd_vel"}),": This is the topic where the teleop node publishes velocity commands. The name ",(0,o.jsx)(s.code,{children:"cmd_vel"}),' is a standard convention in ROS for "command velocity."']}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.code,{children:"/turtle1/pose"}),": The ",(0,o.jsx)(s.code,{children:"turtlesim_node"}),' publishes the turtle\'s current position and orientation (its "pose") on this topic. This is how other nodes could know where the turtle is.']}),"\n",(0,o.jsx)(s.li,{children:"The other two topics are used for system-wide events and logging."}),"\n"]}),"\n",(0,o.jsx)(s.h2,{id:"spying-on-a-topic",children:"Spying on a Topic"}),"\n",(0,o.jsxs)(s.p,{children:["We can use ",(0,o.jsx)(s.code,{children:"ros2 topic echo"})," to print the messages that are being published on a topic in real-time. Let's listen to the command velocity topic."]}),"\n",(0,o.jsx)(s.p,{children:"In your third terminal, run:"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-bash",children:"ros2 topic echo /turtle1/cmd_vel\n"})}),"\n",(0,o.jsxs)(s.p,{children:["At first, you won't see anything. But now, go to the terminal running ",(0,o.jsx)(s.code,{children:"turtle_teleop_key"})," and press the arrow keys. You will see messages start to appear in your third terminal!"]}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{children:"linear:\n  x: 2.0\n  y: 0.0\n  z: 0.0\nangular:\n  x: 0.0\n  y: 0.0\n  z: 0.0\n---\n"})}),"\n",(0,o.jsxs)(s.p,{children:['You are "echoing" the ',(0,o.jsx)(s.code,{children:"Twist"})," messages that the teleop node is publishing. This is an incredibly powerful debugging tool. It lets you see the raw data flowing between any two nodes in your system without having to modify their code."]}),"\n",(0,o.jsxs)(s.p,{children:["Now try echoing the ",(0,o.jsx)(s.code,{children:"/turtle1/pose"})," topic while you drive the turtle around."]}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-bash",children:"ros2 topic echo /turtle1/pose\n"})}),"\n",(0,o.jsxs)(s.p,{children:["You will see a continuous stream of messages showing the turtle's changing ",(0,o.jsx)(s.code,{children:"x"}),", ",(0,o.jsx)(s.code,{children:"y"}),", and ",(0,o.jsx)(s.code,{children:"theta"})," (angle) values."]}),"\n",(0,o.jsx)(s.h2,{id:"publishing-from-the-command-line",children:"Publishing from the Command Line"}),"\n",(0,o.jsx)(s.p,{children:"We can also publish messages directly from the command line, without needing a separate node. This is useful for testing."}),"\n",(0,o.jsx)(s.p,{children:"Let's make the turtle move in a circle. The command is a bit long:"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-bash",children:'ros2 topic pub --rate 1 /turtle1/cmd_vel geometry_msgs/msg/Twist "{linear: {x: 2.0, y: 0.0, z: 0.0}, angular: {x: 0.0, y: 0.0, z: 1.8}}"\n'})}),"\n",(0,o.jsx)(s.p,{children:"Let's break this command down:"}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.code,{children:"ros2 topic pub"}),": The command to publish a message."]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.code,{children:"--rate 1"}),": Publish the message at a rate of 1 Hz (once per second)."]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.code,{children:"/turtle1/cmd_vel"}),": The topic to publish to."]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.code,{children:"geometry_msgs/msg/Twist"}),": The ",(0,o.jsx)(s.strong,{children:"type"})," of message we are publishing."]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.code,{children:'"{...}"'}),": The actual data for the message, in YAML format. We are setting the linear x velocity to 2.0 and the angular z velocity to 1.8."]}),"\n"]}),"\n",(0,o.jsxs)(s.p,{children:["When you run this, you will see the turtle start to move in a circle, even if the ",(0,o.jsx)(s.code,{children:"turtle_teleop_key"})," node is not running! You are now controlling the robot directly from the command line. Press ",(0,o.jsx)(s.code,{children:"Ctrl+C"})," in that terminal to stop publishing."]}),"\n",(0,o.jsx)(s.p,{children:"You now have the fundamental tools for inspecting and debugging a ROS 2 system. In the next lesson, we'll explore the other main communication patterns: services and parameters."})]})}function h(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,o.jsx)(s,{...e,children:(0,o.jsx)(a,{...e})}):a(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>r,x:()=>l});var t=n(6540);const o={},i=t.createContext(o);function r(e){const s=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),t.createElement(i.Provider,{value:s},e.children)}}}]);