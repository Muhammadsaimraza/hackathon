"use strict";(globalThis.webpackChunkrobolearn=globalThis.webpackChunkrobolearn||[]).push([[4135],{6955:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"module-2-simulation/sensors-in-simulation/11-4-sensors-debugging","title":"Lesson 11.4: Sensors Debugging","description":"Your simulation is now publishing a lot of data. But how do you know if the data is correct? Debugging simulated sensors is a critical skill. Here are the primary tools and techniques you should use.","source":"@site/docs/module-2-simulation/11-sensors-in-simulation/11-4-sensors-debugging.md","sourceDirName":"module-2-simulation/11-sensors-in-simulation","slug":"/module-2-simulation/sensors-in-simulation/11-4-sensors-debugging","permalink":"/hackathon/docs/module-2-simulation/sensors-in-simulation/11-4-sensors-debugging","draft":false,"unlisted":false,"editUrl":"https://github.com/Muhammadsaimraza/docs/module-2-simulation/11-sensors-in-simulation/11-4-sensors-debugging.md","tags":[],"version":"current","frontMatter":{},"sidebar":"textbookSidebar","previous":{"title":"Lesson 11.3: IMU & Contact Sensors","permalink":"/hackathon/docs/module-2-simulation/sensors-in-simulation/11-3-imu-and-contact"},"next":{"title":"Chapter 12: ROS 2 + Gazebo Integration","permalink":"/hackathon/docs/module-2-simulation/ros2-gazebo-integration/"}}');var i=n(4848),t=n(8453);const r={},a="Lesson 11.4: Sensors Debugging",l={},c=[{value:"1. <code>ros2 topic echo</code>",id:"1-ros2-topic-echo",level:2},{value:"2. RViz",id:"2-rviz",level:2},{value:"3. Gazebo GUI",id:"3-gazebo-gui",level:2},{value:"Common Problems &amp; Solutions",id:"common-problems--solutions",level:2}];function d(e){const s={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"lesson-114-sensors-debugging",children:"Lesson 11.4: Sensors Debugging"})}),"\n",(0,i.jsx)(s.p,{children:"Your simulation is now publishing a lot of data. But how do you know if the data is correct? Debugging simulated sensors is a critical skill. Here are the primary tools and techniques you should use."}),"\n",(0,i.jsxs)(s.h2,{id:"1-ros2-topic-echo",children:["1. ",(0,i.jsx)(s.code,{children:"ros2 topic echo"})]}),"\n",(0,i.jsx)(s.p,{children:"This is always your first step. Before you try to visualize anything, look at the raw data."}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"ros2 topic echo <topic_name>\n"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Is anything being published?"})," If you see no messages, it means your plugin is not running or is configured incorrectly. Check your URDF and the Gazebo console for errors."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Is the data reasonable?"})," If you're echoing ",(0,i.jsx)(s.code,{children:"/scan"})," and all the ranges are ",(0,i.jsx)(s.code,{children:"inf"})," (infinity), it might mean your LiDAR is inside another object or pointing at the sky. If you're echoing ",(0,i.jsx)(s.code,{children:"/image_raw"}),", you won't see the image data itself (it's too large), but you should see the message headers being published."]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"2-rviz",children:"2. RViz"}),"\n",(0,i.jsx)(s.p,{children:"RViz is the primary tool for visualizing sensor data in a spatial context."}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"TF Tree:"}),' The first thing to check is your TF tree. Add the "TF" display. Do all the links appear? Are they connected correctly? If your ',(0,i.jsx)(s.code,{children:"camera_link"})," is floating in space instead of being attached to your ",(0,i.jsx)(s.code,{children:"chassis"}),", you have a problem in your joint's ",(0,i.jsx)(s.code,{children:"<origin>"})," tag."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"LaserScan Display:"})," When you add a LaserScan display and set the topic, you should see the points appear around your robot model. If the points are offset or rotated incorrectly, it usually means the ",(0,i.jsx)(s.code,{children:"<frame_name>"})," in your sensor plugin configuration is wrong, or the sensor's ",(0,i.jsx)(s.code,{children:"<pose>"})," inside the URDF is incorrect."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Image Display:"}),' RViz can also display camera images. Add an "Image" display and set the topic. This is useful, but for simple viewing, ',(0,i.jsx)(s.code,{children:"rqt_image_view"})," is often easier."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"IMU Display:"})," You can't directly visualize the IMU's orientation, but you can see its effect on the TF tree. The IMU data is often used by a localization algorithm (like SLAM) to publish the robot's orientation. You would see this by watching the ",(0,i.jsx)(s.code,{children:"chassis"})," frame rotate in RViz as you move the physical robot in Gazebo."]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"3-gazebo-gui",children:"3. Gazebo GUI"}),"\n",(0,i.jsx)(s.p,{children:"Don't forget that Gazebo itself is a powerful debugging tool."}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Visualizers:"}),' In the Gazebo GUI, you can turn on visualizers for many sensor types. For example, you can enable "View" -> "Lidar visualization" to see the actual laser beams being cast in the simulation. This can help you understand why your sensor isn\'t seeing an object you think it should. You can do the same for camera frustums and other sensors.']}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Inspect Tool:"}),' Use the "Inspect" tool (the magnifying glass) to click on any link of your robot. The panel on the right will show you all of its properties, including its mass, inertia, and whether it is in a collision state.']}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Console Output:"})," The terminal where you launched Gazebo is filled with useful information and error messages. If a plugin fails to load or a model can't be found, the error will be printed here."]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"common-problems--solutions",children:"Common Problems & Solutions"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Problem:"})," No messages on the topic.","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Solution:"})," Check the Gazebo console for errors. Did the plugin load correctly? Is the topic name in your URDF spelled correctly?"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Problem:"})," Data is in the wrong place in RViz (e.g., LiDAR scan is floating in space).","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Solution:"})," Your TF tree is broken. Check the ",(0,i.jsx)(s.code,{children:"<frame_name>"})," or ",(0,i.jsx)(s.code,{children:"<frame_id>"})," in your plugin configuration. It must match the name of the link the sensor is attached to."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Problem:"})," The simulation is very slow.","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Solution:"})," Your sensor settings might be too high. Try reducing the ",(0,i.jsx)(s.code,{children:"update_rate"})," or the number of ",(0,i.jsx)(s.code,{children:"samples"})," (for LiDAR) or the ",(0,i.jsx)(s.code,{children:"width"}),"/",(0,i.jsx)(s.code,{children:"height"})," (for a camera). A ",(0,i.jsx)(s.code,{children:"gpu_lidar"})," is much faster than a CPU ",(0,i.jsx)(s.code,{children:"lidar"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"By combining these tools, you can systematically diagnose and fix almost any issue with your simulated sensors. This concludes Chapter 11. You can now build a robot and give it senses. In the next chapter, you'll learn how to connect your ROS 2 code to the robot to create a closed-loop control system."})]})}function h(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>r,x:()=>a});var o=n(6540);const i={},t=o.createContext(i);function r(e){const s=o.useContext(t);return o.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),o.createElement(t.Provider,{value:s},e.children)}}}]);