"use strict";(globalThis.webpackChunkrobolearn=globalThis.webpackChunkrobolearn||[]).push([[4930],{6437:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>l});const o=JSON.parse('{"id":"module-2-simulation/ros2-gazebo-integration/12-1-ros-gz-bridge","title":"Lesson 12.1: The ros_gz_bridge","description":"Gazebo and ROS are two separate, independent systems. Gazebo has its own internal publish/subscribe system called \\"Gazebo Transport.\\" ROS has its own publish/subscribe system (DDS). They do not speak the same language.","source":"@site/docs/module-2-simulation/12-ros2-gazebo-integration/12-1-ros-gz-bridge.md","sourceDirName":"module-2-simulation/12-ros2-gazebo-integration","slug":"/module-2-simulation/ros2-gazebo-integration/12-1-ros-gz-bridge","permalink":"/hackathon/docs/module-2-simulation/ros2-gazebo-integration/12-1-ros-gz-bridge","draft":false,"unlisted":false,"editUrl":"https://github.com/Muhammadsaimraza/docs/module-2-simulation/12-ros2-gazebo-integration/12-1-ros-gz-bridge.md","tags":[],"version":"current","frontMatter":{},"sidebar":"textbookSidebar","previous":{"title":"Chapter 12: ROS 2 + Gazebo Integration","permalink":"/hackathon/docs/module-2-simulation/ros2-gazebo-integration/"},"next":{"title":"Lesson 12.2: Spawning Robots (Review)","permalink":"/hackathon/docs/module-2-simulation/ros2-gazebo-integration/12-2-spawning-robots"}}');var i=n(4848),t=n(8453);const r={},a="Lesson 12.1: The ros_gz_bridge",d={},l=[{value:"How it Works",id:"how-it-works",level:2},{value:"Using the Bridge Manually",id:"using-the-bridge-manually",level:2},{value:"Breakdown",id:"breakdown",level:3},{value:"Finding Gazebo Topics",id:"finding-gazebo-topics",level:2}];function c(e){const s={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsxs)(s.h1,{id:"lesson-121-the-ros_gz_bridge",children:["Lesson 12.1: The ",(0,i.jsx)(s.code,{children:"ros_gz_bridge"})]})}),"\n",(0,i.jsx)(s.p,{children:'Gazebo and ROS are two separate, independent systems. Gazebo has its own internal publish/subscribe system called "Gazebo Transport." ROS has its own publish/subscribe system (DDS). They do not speak the same language.'}),"\n",(0,i.jsxs)(s.p,{children:["The ",(0,i.jsx)(s.code,{children:"ros_gz_bridge"})," is a special ROS 2 node that translates between these two worlds."]}),"\n",(0,i.jsx)(s.h2,{id:"how-it-works",children:"How it Works"}),"\n",(0,i.jsx)(s.p,{children:"The bridge node subscribes to a Gazebo topic, converts the message to its ROS 2 equivalent, and then publishes it on a ROS 2 topic. It can also do the reverse."}),"\n",(0,i.jsxs)(s.p,{children:["For example, when you use the ",(0,i.jsx)(s.code,{children:"gz-sim-ros2-camera-system"})," plugin:"]}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:["The Gazebo camera simulation publishes a Gazebo ",(0,i.jsx)(s.code,{children:"Image"})," message on an internal Gazebo topic."]}),"\n",(0,i.jsx)(s.li,{children:"The plugin, which has an embedded bridge, receives this message."}),"\n",(0,i.jsxs)(s.li,{children:["It converts the Gazebo ",(0,i.jsx)(s.code,{children:"Image"})," message into a ROS 2 ",(0,i.jsx)(s.code,{children:"sensor_msgs/msg/Image"})," message."]}),"\n",(0,i.jsxs)(s.li,{children:["It publishes the ROS 2 message on the topic you specified (e.g., ",(0,i.jsx)(s.code,{children:"/image_raw"}),")."]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"using-the-bridge-manually",children:"Using the Bridge Manually"}),"\n",(0,i.jsx)(s.p,{children:"While the sensor and controller plugins are convenient because they have a pre-configured bridge built-in, you can also run the bridge as a standalone node to pass any message type between the two systems."}),"\n",(0,i.jsxs)(s.p,{children:["This is done with the ",(0,i.jsx)(s.code,{children:"ros_gz_bridge"})," executable."]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Example:"}),"\nLet's say you want to get the pose of your robot model, ",(0,i.jsx)(s.code,{children:"my_robot"}),", from Gazebo and publish it to a ROS 2 topic."]}),"\n",(0,i.jsx)(s.p,{children:"You can run the bridge node like this:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"ros2 run ros_gz_bridge parameter_bridge /model/my_robot/pose@geometry_msgs/msg/PoseStamped@gz.msgs.Pose\n"})}),"\n",(0,i.jsx)(s.h3,{id:"breakdown",children:"Breakdown"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"ros2 run ros_gz_bridge parameter_bridge"}),": Runs the bridge node."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:(0,i.jsx)(s.code,{children:"/model/my_robot/pose"})}),": The name of the Gazebo topic to subscribe to. (Gazebo automatically publishes the pose of every model on a topic with this naming convention)."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:(0,i.jsx)(s.code,{children:"@geometry_msgs/msg/PoseStamped"})}),": The ROS 2 message type to convert to. This is specified after the first ",(0,i.jsx)(s.code,{children:"@"}),"."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:(0,i.jsx)(s.code,{children:"@gz.msgs.Pose"})}),": The Gazebo message type to convert from. This is specified after the second ",(0,i.jsx)(s.code,{children:"@"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["This command will create a ROS 2 topic named ",(0,i.jsx)(s.code,{children:"/model/my_robot/pose"})," and publish the robot's pose to it. Your ROS 2 nodes can then subscribe to this topic to know where the robot is."]}),"\n",(0,i.jsx)(s.h2,{id:"finding-gazebo-topics",children:"Finding Gazebo Topics"}),"\n",(0,i.jsxs)(s.p,{children:["How do you know what Gazebo topics are available? You can use the ",(0,i.jsx)(s.code,{children:"gz"})," command line tool."]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"gz topic -l\n"})}),"\n",(0,i.jsx)(s.p,{children:"This will list all the topics currently being published inside the Gazebo simulation. You can use this list to find the topics you want to bridge to ROS 2."}),"\n",(0,i.jsx)(s.p,{children:"The plugins we have used so far handle this bridging for us automatically."}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["The ",(0,i.jsx)(s.code,{children:"DiffDrive"})," plugin bridges the ROS 2 ",(0,i.jsx)(s.code,{children:"/cmd_vel"})," topic to the Gazebo physics engine."]}),"\n",(0,i.jsxs)(s.li,{children:["The ",(0,i.jsx)(s.code,{children:"Camera"})," plugin bridges the internal Gazebo camera data to the ROS 2 ",(0,i.jsx)(s.code,{children:"/image_raw"})," topic."]}),"\n",(0,i.jsxs)(s.li,{children:["The ",(0,i.jsx)(s.code,{children:"Lidar"})," plugin bridges the internal Gazebo laser data to the ROS 2 ",(0,i.jsx)(s.code,{children:"/scan"})," topic."]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"Understanding that this bridge is the underlying mechanism is key to debugging and to creating more complex integrations between the two systems. In the next lessons, we will leverage these bridged topics to create a closed-loop controller."})]})}function h(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>r,x:()=>a});var o=n(6540);const i={},t=o.createContext(i);function r(e){const s=o.useContext(t);return o.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),o.createElement(t.Provider,{value:s},e.children)}}}]);