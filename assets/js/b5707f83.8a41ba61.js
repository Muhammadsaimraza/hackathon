"use strict";(globalThis.webpackChunkrobolearn=globalThis.webpackChunkrobolearn||[]).push([[5213],{374:(e,s,r)=>{r.r(s),r.d(s,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"module-1-ros/meet-ros2/3-4-services-and-parameters","title":"Lesson 3.4: Services & Parameters","description":"Topics are great for continuous streams of data, but sometimes you need a request/response interaction. For example, \\"What is the current time?\\" or \\"Please reset the simulation.\\" This is what Services are for.","source":"@site/docs/module-1-ros/3-meet-ros2/3-4-services-and-parameters.md","sourceDirName":"module-1-ros/3-meet-ros2","slug":"/module-1-ros/meet-ros2/3-4-services-and-parameters","permalink":"/hackathon/docs/module-1-ros/meet-ros2/3-4-services-and-parameters","draft":false,"unlisted":false,"editUrl":"https://github.com/Muhammadsaimraza/docs/module-1-ros/3-meet-ros2/3-4-services-and-parameters.md","tags":[],"version":"current","frontMatter":{},"sidebar":"textbookSidebar","previous":{"title":"Lesson 3.3: Nodes & Topics","permalink":"/hackathon/docs/module-1-ros/meet-ros2/3-3-nodes-and-topic"},"next":{"title":"Chapter 4: Your First ROS 2 Code","permalink":"/hackathon/docs/module-1-ros/first-code/"}}');var t=r(4848),i=r(8453);const a={},o="Lesson 3.4: Services & Parameters",c={},l=[{value:"Services: The Request/Response Model",id:"services-the-requestresponse-model",level:2},{value:"Services with Arguments",id:"services-with-arguments",level:3},{value:"Parameters: Configuring a Node",id:"parameters-configuring-a-node",level:2}];function d(e){const s={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"lesson-34-services--parameters",children:"Lesson 3.4: Services & Parameters"})}),"\n",(0,t.jsxs)(s.p,{children:['Topics are great for continuous streams of data, but sometimes you need a request/response interaction. For example, "What is the current time?" or "Please reset the simulation." This is what ',(0,t.jsx)(s.strong,{children:"Services"})," are for."]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Parameters"}),", on the other hand, are a way to configure a node at runtime without having to restart it."]}),"\n",(0,t.jsxs)(s.p,{children:["Let's explore these concepts using Turtlesim. Keep your ",(0,t.jsx)(s.code,{children:"turtlesim_node"})," running."]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"services-the-requestresponse-model",children:"Services: The Request/Response Model"}),"\n",(0,t.jsxs)(s.p,{children:["A service has a ",(0,t.jsx)(s.strong,{children:"server"})," (which provides the service) and a ",(0,t.jsx)(s.strong,{children:"client"})," (which calls the service). It's a two-way conversation."]}),"\n",(0,t.jsxs)(s.p,{children:["Let's see what services the ",(0,t.jsx)(s.code,{children:"turtlesim_node"})," provides. In a new terminal, run:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"ros2 service list\n"})}),"\n",(0,t.jsx)(s.p,{children:"You will see a long list, including:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"/clear\n/kill\n/reset\n/spawn\n/turtle1/set_pen\n...\n"})}),"\n",(0,t.jsxs)(s.p,{children:['These are all the actions you can "request" from the ',(0,t.jsx)(s.code,{children:"turtlesim_node"}),"."]}),"\n",(0,t.jsxs)(s.p,{children:["Let's try calling the ",(0,t.jsx)(s.code,{children:"/clear"})," service. This service erases the trail the turtle has left behind. To call a service from the command line, we use ",(0,t.jsx)(s.code,{children:"ros2 service call"}),"."]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"ros2 service call /clear std_srvs/srv/Empty\n"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"/clear"}),": The name of the service."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"std_srvs/srv/Empty"}),": The ",(0,t.jsx)(s.strong,{children:"type"})," of the service. In this case, it's an \"Empty\" service, meaning the request doesn't need to contain any data."]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"When you run this, you'll see the turtle's trail disappear."}),"\n",(0,t.jsx)(s.h3,{id:"services-with-arguments",children:"Services with Arguments"}),"\n",(0,t.jsxs)(s.p,{children:["Some services require arguments. Let's spawn a new turtle. First, let's see what information the ",(0,t.jsx)(s.code,{children:"/spawn"})," service needs with ",(0,t.jsx)(s.code,{children:"ros2 service info"}),"."]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"ros2 service info /spawn\n"})}),"\n",(0,t.jsxs)(s.p,{children:["This will tell you the service type is ",(0,t.jsx)(s.code,{children:"turtlesim/srv/Spawn"}),". We need more detail."]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"ros2 interface show turtlesim/srv/Spawn\n"})}),"\n",(0,t.jsx)(s.p,{children:"This shows the structure of the request and response."}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"float32 x\nfloat32 y\nfloat32 theta\nstring name # Optional. A unique name will be created if this is empty.\n---\nstring name\n"})}),"\n",(0,t.jsxs)(s.p,{children:["The request (above the ",(0,t.jsx)(s.code,{children:"---"}),") needs an x, y, theta, and an optional name. The response (below the ",(0,t.jsx)(s.code,{children:"---"}),") will return the name of the new turtle."]}),"\n",(0,t.jsx)(s.p,{children:"Now let's call it:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"ros2 service call /spawn turtlesim/srv/Spawn \"{x: 1.0, y: 1.0, theta: 0.5, name: 'turtle2'}\"\n"})}),"\n",(0,t.jsxs)(s.p,{children:["A new turtle named ",(0,t.jsx)(s.code,{children:"turtle2"})," will appear at position (1, 1) in the simulation!"]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"parameters-configuring-a-node",children:"Parameters: Configuring a Node"}),"\n",(0,t.jsx)(s.p,{children:"Parameters allow us to change the configuration of a node while it's running."}),"\n",(0,t.jsxs)(s.p,{children:["Let's see what parameters the ",(0,t.jsx)(s.code,{children:"turtlesim_node"})," has."]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"ros2 param list\n"})}),"\n",(0,t.jsx)(s.p,{children:"You should see:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"/turtlesim:\n  background_b\n  background_g\n  background_r\n  use_sim_time\n"})}),"\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.code,{children:"/turtlesim"})," node has parameters to control the background color of the simulation."]}),"\n",(0,t.jsx)(s.p,{children:"Let's read the current value of the red component."}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"ros2 param get /turtlesim background_r\n"})}),"\n",(0,t.jsxs)(s.p,{children:["It will return ",(0,t.jsx)(s.code,{children:"69"}),"."]}),"\n",(0,t.jsxs)(s.p,{children:["Now, let's change it. We can use ",(0,t.jsx)(s.code,{children:"ros2 param set"})," to change the background to a nice yellow color (Red=255, Green=255, Blue=0)."]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"ros2 param set /turtlesim background_r 255\nros2 param set /turtlesim background_g 255\nros2 param set /turtlesim background_b 0\n"})}),"\n",(0,t.jsx)(s.p,{children:"As you run these commands, you will see the background color of the Turtlesim window change in real-time. You have just reconfigured a running ROS 2 node without restarting it."}),"\n",(0,t.jsx)(s.p,{children:"This is an extremely powerful feature for tuning and calibrating robots. You can adjust motor controller gains, sensor filter settings, and more, all while the system is live."}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.p,{children:"This concludes Chapter 3. You have now mastered the fundamental command-line tools for interacting with a ROS 2 system. You can inspect nodes, topics, services, and parameters. With this foundation, you are ready to start writing your own ROS 2 nodes in the next chapter."})]})}function h(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,s,r)=>{r.d(s,{R:()=>a,x:()=>o});var n=r(6540);const t={},i=n.createContext(t);function a(e){const s=n.useContext(i);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),n.createElement(i.Provider,{value:s},e.children)}}}]);