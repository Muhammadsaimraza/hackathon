# سبق 12.1: `ros_gz_bridge`

Gazebo اور ROS دو الگ، آزاد نظام ہیں۔ Gazebo کا اپنا اندرونی پبلش/سبسکرائب سسٹم ہے جسے "Gazebo Transport" کہا جاتا ہے۔ ROS کا اپنا پبلش/سبسکرائب سسٹم (DDS) ہے۔ وہ ایک ہی زبان نہیں بولتے۔

`ros_gz_bridge` ایک خاص ROS 2 نوڈ ہے جو ان دو دنیاؤں کے درمیان ترجمہ کرتا ہے۔

## یہ کیسے کام کرتا ہے۔

برج نوڈ ایک Gazebo ٹاپک کو سبسکرائب کرتا ہے، پیغام کو اس کے ROS 2 مساوی میں تبدیل کرتا ہے، اور پھر اسے ایک ROS 2 ٹاپک پر شائع کرتا ہے۔ یہ اس کے برعکس بھی کر سکتا ہے۔

مثال کے طور پر، جب آپ `gz-sim-ros2-camera-system` پلگ ان استعمال کرتے ہیں:
1.  Gazebo کیمرہ سیمولیشن ایک Gazebo `Image` پیغام کو اندرونی Gazebo ٹاپک پر شائع کرتا ہے۔
2.  پلگ ان، جس میں ایک ایمبیڈڈ برج ہے، اس پیغام کو وصول کرتا ہے۔
3.  یہ Gazebo `Image` پیغام کو ROS 2 `sensor_msgs/msg/Image` پیغام میں تبدیل کرتا ہے۔
4.  یہ ROS 2 پیغام کو اس ٹاپک پر شائع کرتا ہے جسے آپ نے مخصوص کیا تھا (مثلاً، `/image_raw`)۔

## برج کو دستی طور پر استعمال کرنا

جب کہ سینسر اور کنٹرولر پلگ انز آسان ہیں کیونکہ ان میں پہلے سے ترتیب شدہ برج بلٹ ان ہوتا ہے، آپ برج کو ایک اسٹینڈ لون نوڈ کے طور پر بھی چلا سکتے ہیں تاکہ دونوں سسٹمز کے درمیان کسی بھی پیغام کی قسم کو منتقل کیا جا سکے۔

یہ `ros_gz_bridge` ایگزیکیوٹیبل کے ساتھ کیا جاتا ہے۔

**مثال:**
فرض کریں آپ اپنے روبوٹ ماڈل، `my_robot`، کا پوز Gazebo سے حاصل کرنا چاہتے ہیں اور اسے ROS 2 ٹاپک پر شائع کرنا چاہتے ہیں۔

آپ برج نوڈ کو اس طرح چلا سکتے ہیں:
```bash
ros2 run ros_gz_bridge parameter_bridge /model/my_robot/pose@geometry_msgs/msg/PoseStamped@gz.msgs.Pose
```

### وضاحت
*   `ros2 run ros_gz_bridge parameter_bridge`: برج نوڈ چلاتا ہے۔
*   **`/model/my_robot/pose`**: Gazebo ٹاپک کا نام جس کو سبسکرائب کرنا ہے۔ (Gazebo خود بخود ہر ماڈل کے پوز کو اس نامی کنونشن کے ساتھ ایک ٹاپک پر شائع کرتا ہے)۔
*   **`@geometry_msgs/msg/PoseStamped`**: ROS 2 پیغام کی قسم جس میں تبدیل کرنا ہے۔ یہ پہلے `@` کے بعد مخصوص کیا جاتا ہے۔
*   **`@gz.msgs.Pose`**: Gazebo پیغام کی قسم جس سے تبدیل کرنا ہے۔ یہ دوسرے `@` کے بعد مخصوص کیا جاتا ہے۔

یہ کمانڈ `/model/my_robot/pose` نامی ایک ROS 2 ٹاپک بنائے گا اور روبوٹ کے پوز کو اس پر شائع کرے گا۔ آپ کے ROS 2 نوڈس پھر اس ٹاپک کو سبسکرائب کر سکتے ہیں تاکہ روبوٹ کی پوزیشن معلوم ہو سکے۔

پلگ انز جو ہم نے اب تک استعمال کیے ہیں وہ خود بخود اس برجنگ کو ہمارے لیے سنبھال لیتے ہیں۔
*   `DiffDrive` پلگ ان ROS 2 `/cmd_vel` ٹاپک کو Gazebo فزکس انجن سے جوڑتا ہے۔
*   `Camera` پلگ ان اندرونی Gazebo کیمرہ ڈیٹا کو ROS 2 `/image_raw` ٹاپک سے جوڑتا ہے۔
*   `Lidar` پلگ ان اندرونی Gazebo لیزر ڈیٹا کو ROS 2 `/scan` ٹاپک سے جوڑتا ہے۔

یہ سمجھنا کہ یہ برج بنیادی میکانزم ہے ڈیبگنگ اور دونوں سسٹمز کے درمیان زیادہ پیچیدہ انٹیگریشنز بنانے کی کلید ہے۔ اگلے اسباق میں، ہم ان برجڈ ٹاپکس کا فائدہ اٹھائیں گے تاکہ ایک کلوزڈ-لوپ کنٹرولر بنا سکیں۔
