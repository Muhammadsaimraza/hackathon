# سبق 7.1: تفصیلات

ایک پیچیدہ نظام کے لیے کوڈ کی ایک بھی لائن لکھنے سے پہلے، ایک اچھا انجینئر ایک تفصیلات لکھتا ہے۔ ایک تفصیلات اس بات کی تفصیلی وضاحت ہے کہ سسٹم کو *کیا* کرنا چاہیے، نہ کہ *کیسے* کرنا چاہیے۔ یہ اجزاء، ان کے انٹرفیس، اور ان کے متوقع رویے کی وضاحت کرتی ہے۔

اس کیپسٹون کے لیے، ہم ایک ایسا نظام ڈیزائن کریں گے جو ٹرٹل سم سمیلیٹر میں ایک کچھوے کو شکل بنانے کا حکم دیتا ہے۔

## اعلیٰ سطحی ضروریات

1.  سسٹم کو ایک کچھوے کو کثیرالضلعی (مثلاً، ایک مربع) بنانے کا حکم دینے کے قابل ہونا چاہیے۔
2.  شکل کا سائز (کنارے کی لمبائی) اور ڈرائنگ کی رفتار قابل ترتیب ہونی چاہیے۔
3.  ڈرائنگ کا عمل سروس کال کے ذریعے شروع ہونا چاہیے۔
4.  سسٹم کو ایک ہی لانچ فائل سے شروع کیا جانا چاہیے۔

## سسٹم کے اجزاء

ان ضروریات کی بنیاد پر، ہم کم از کم دو نوڈس کی ضرورت کی شناخت کر سکتے ہیں:

1.  **ایک کنٹرولر نوڈ:** یہ نوڈ شکل بنانے کی "کاروباری منطق" کے لیے ذمہ دار ہوگا۔ یہ اعلیٰ سطحی مقصد ("ایک مربع بنائیں") کو نچلی سطح کی رفتار کے کمانڈز کی ترتیب میں ترجمہ کرے گا۔
2.  **ایک ٹرٹل سم نوڈ:** سمیلیٹر خود، جسے ہم اپنے سسٹم کے حصے کے طور پر لانچ کریں گے۔

## انٹرفیس ڈیزائن ("API")

ہمارے نوڈس کیسے مواصلات کریں گے؟

1.  **کنٹرولر → ٹرٹل سم:** کنٹرولر کو سمیلیٹر کو رفتار کے کمانڈ بھیجنے کی ضرورت ہے۔ ہم معیاری `/turtle1/cmd_vel` ٹاپک کو `geometry_msgs/msg/Twist` پیغامات کے ساتھ استعمال کریں گے، جیسا کہ `turtle_teleop_key` نے کیا تھا۔
2.  **صارف → کنٹرولر:** صارف کو ڈرائنگ کے عمل کو شروع کرنے کے لیے ایک طریقے کی ضرورت ہے۔ اس کے لیے ایک سروس بہترین ہے۔ ہم ایک سروس بنائیں گے جسے صارف ڈرائنگ شروع کرنے کے لیے کال کر سکتا ہے۔

آئیے اپنی سروس کی وضاحت کریں۔ ہمیں ایک کسٹم سروس کی قسم کی ضرورت ہوگی۔

### کسٹم سروس: `DrawShape.srv`

آئیے اسے اپنے `my_custom_interfaces` پیکیج میں بنائیں۔
```
# srv/DrawShape.srv
float32 edge_length
int32 sides
---
bool success
```
*   **درخواست:** `edge_length` شکل کا سائز بیان کرتا ہے، اور `sides` بیان کرتا ہے کہ کثیرالضلعی کے کتنے اطراف ہیں (مثلاً، ایک مربع کے لیے 4)۔
*   **جواب:** ایک سادہ بولین یہ بتانے کے لیے کہ ڈرائنگ کامیابی سے مکمل ہوئی یا نہیں۔

## نوڈ بہ نوڈ تفصیلات

### 1. `shape_drawer_node`

*   **نوڈ کا نام:** `shape_drawer_node`
*   **مقصد:** شکل بنانے کے لیے ایک سروس فراہم کرتا ہے اور ضروری رفتار کے کمانڈز شائع کرتا ہے۔
*   **پیرامیٹرز:**
    *   `linear_velocity` (فلوٹ، ڈیفالٹ: 1.0): ڈرائنگ کے دوران کچھوے کی آگے کی رفتار۔
    *   `angular_velocity` (فلوٹ، ڈیفالٹ: 1.0): کونوں پر کچھوے کی موڑ کی رفتار۔
*   **فراہم کردہ خدمات:**
    *   `/draw_shape` (`my_custom_interfaces/srv/DrawShape`): شکل بنانے کی درخواست وصول کرتا ہے۔
*   **شائع کردہ ٹاپکس:**
    *   `/turtle1/cmd_vel` (`geometry_msgs/msg/Twist`): کچھوے کو حرکت دینے کے لیے رفتار کے کمانڈز شائع کرتا ہے۔
*   **رویہ:**
    1.  جب `/draw_shape` سروس کال کی جاتی ہے، تو نوڈ `edge_length` اور `sides` وصول کرتا ہے۔
    2.  یہ کونوں کے لیے مطلوبہ موڑ کا زاویہ شمار کرتا ہے (360 / اطراف)۔
    3.  یہ ایک لوپ میں داخل ہوتا ہے جو اطراف کی تعداد کے لیے دہراتا ہے۔
    4.  ہر لوپ تکرار میں، یہ:
        a.  (`edge_length` / `linear_velocity`) سیکنڈ کی مدت کے لیے `linear.x` کو `linear_velocity` پیرامیٹر پر سیٹ کر کے ایک `Twist` پیغام شائع کرتا ہے۔
        b.  (`turn_angle` / `angular_velocity`) سیکنڈ کی مدت کے لیے `angular.z` کو `angular_velocity` پیرامیٹر پر سیٹ کر کے ایک `Twist` پیغام شائع کرتا ہے۔
    5.  لوپ مکمل ہونے کے بعد، یہ کچھوے کو روکنے کے لیے صفر-رفتار والا `Twist` پیغام شائع کرتا ہے۔
    6.  یہ سروس جواب میں `success: true` واپس کرتا ہے۔

### 2. `turtlesim_node`

*   یہ `turtlesim` پیکیج سے معیاری نوڈ ہے۔ ہمیں اسے لکھنے کی ضرورت نہیں، صرف لانچ کرنا ہے۔

## لانچ فائل کی تفصیلات

*   **نام:** `capstone.launch.py`
*   **اعمال:**
    1.  `turtlesim` پیکیج سے `turtlesim_node` شروع کریں۔
    2.  ہمارا `shape_drawer_node` شروع کریں۔
    3.  `shape_drawer_node` کو ڈیفالٹ پیرامیٹر کی قدریں پاس کریں (مثلاً، `linear_velocity: 0.5`، `angular_velocity: 0.5`)۔

---

اس تفصیلات کے ساتھ، ہمارے پاس ایک مکمل اور غیر مبہم منصوبہ ہے۔ ہم بالکل جانتے ہیں کہ کیا بنانا ہے، اجزاء کیسے تعامل کریں گے، اور حتمی رویہ کیا ہونا چاہیے۔ اگلے سبق میں، آپ اس منصوبے کو نافذ کریں گے۔